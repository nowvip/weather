name: Download Video

on:
  schedule:
    - cron: "00 11 * * *"   #19:00
    - cron: "20 11 * * *"   #19:20
    - cron: "30 11 * * *"   #19:30
  workflow_dispatch:

jobs:
  download:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Download video
      run: |
        mkdir -p videos
        curl -L "https://f.video.weibocdn.com/o0/upYsSAfSlx08hPMFjUF20104120146750E010.mp4?label=mp4_720p&template=1280x720.25.0&ori=0&ps=1BVp4ysnknHVZu&Expires=1725719310&ssig=Epvlpgthcb&KID=unistore,video" -o videos/my_video.mp4

    - name: Commit video to repository
      run: |
        git config --global user.name 'GitHub Actions'
        git config --global user.email 'actions@github.com'
        git add videos/my_video.mp4
        git commit -m 'Add downloaded video'
        git push
